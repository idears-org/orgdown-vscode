#+TITLE: Top-level Structure Scope Tests

* Mega Structure Test

#+NAME: Comprehensive structure test with transitions and edge cases
#+BEGIN_FIXTURE
#+TITLE: Header Title
#+AUTHOR: Test Manager

This is the header.

* LV1-A: Active Section
Content of LV1-A.
** LV2-A: Active Child
Content of LV2-A.
* COMMENT LV1-B: Inactive Section via Keyword
Content of LV1-B. This should be inactive.
** LV2-B: Child of Inactive
This headline and its content should inherit the inactive state.
* LV1-C: Archived Section via Tag :ARCHIVE:
Content of LV1-C. This should be inactive.
** LV2-C: Child of Archived
This should also be inactive.
******* LV7-A: Deep child of Archived
This should also be inactive.
* LV1-D: Final Active Section
Back to active state.
#+END_FIXTURE

#+EXPECTED: :type scope
"#+TITLE: Header Title" => {{scopes.META_HEADER}}, {{scopes.KEYWORD}}
"#+AUTHOR: Test Manager" => {{scopes.META_HEADER}}, {{scopes.KEYWORD}}
"This is the header." => {{scopes.META_HEADER}}, {{scopes.PARAGRAPH}}
"* LV1-A: Active Section" => {{scopes.META_OUTLINE_1}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_1}}
"Content of LV1-A." => {{scopes.META_OUTLINE_1}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"** LV2-A: Active Child" => {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_2}}
"Content of LV2-A." => {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"* COMMENT LV1-B: Inactive Section via Keyword" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_1}}
"Content of LV1-B. This should be inactive." => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"** LV2-B: Child of Inactive" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_2}}
"This headline and its content should inherit the inactive state." => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"* LV1-C: Archived Section via Tag :ARCHIVE:" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_1}}
"Content of LV1-C. This should be inactive." => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"** LV2-C: Child of Archived" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_2}}
"This should also be inactive." => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_2}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"******* LV7-A: Deep child of Archived" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_MORE_THAN_6}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_MORE_THAN_6}}
"This should also be inactive." => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.META_OUTLINE_1}}, {{scopes.META_OUTLINE_MORE_THAN_6}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
"* LV1-D: Final Active Section" => {{scopes.META_OUTLINE_1}}, {{scopes.HEADING_BLOCK}}, {{scopes.HEADING_LEVEL_1}}
"Back to active state." => {{scopes.META_OUTLINE_1}}, {{scopes.META_SECTION}}, {{scopes.PARAGRAPH}}
