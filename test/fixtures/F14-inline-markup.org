#+TITLE: Test Suite for Inline Markup
#+AUTHOR: Orgdown Team

# This fixture tests basic and nested inline markup using begin/end rules.

* Bold

#+NAME: Bold: Showcase
#+BEGIN_FIXTURE
This is *bold* text.
#+END_FIXTURE

#+EXPECTED: :type scope
"*" => {{scopes.BOLD_PUNCTUATION}}
"bold" => {{scopes.BOLD}}
"*" => {{scopes.BOLD_PUNCTUATION}}
#+EXPECTED: :type scope
"*bold*" => !{{scopes.BOLD}}, {{scopes.META_INLINE_BOLD}}

#+NAME: Bold: Single character
#+BEGIN_FIXTURE
a *b* c
#+END_FIXTURE
#+EXPECTED: :type scope
"*" => {{scopes.BOLD_PUNCTUATION}}
"b" => {{scopes.BOLD}}
"*" => {{scopes.BOLD_PUNCTUATION}}

#+NAME: Bold: Nested Italic
#+BEGIN_FIXTURE
This is *bold and /italic/* text.
#+END_FIXTURE
#+EXPECTED: :type scope
"*" => {{scopes.BOLD_PUNCTUATION}}
"bold and " => {{scopes.BOLD}}
"/" => {{scopes.BOLD}}, {{scopes.ITALIC_PUNCTUATION}}
"italic" => {{scopes.BOLD}}, {{scopes.ITALIC}}
"/" => {{scopes.BOLD}}, {{scopes.ITALIC_PUNCTUATION}}
"*" => {{scopes.BOLD_PUNCTUATION}}

#+NAME: Bold: Invalid no flanking space
#+BEGIN_FIXTURE
word*bold*word
#+END_FIXTURE
#+EXPECTED: :type scope
"word*bold*word" => !{{scopes.BOLD}}

#+NAME: Bold: Invalid space after opening marker
#+BEGIN_FIXTURE
* bold*
#+END_FIXTURE
#+EXPECTED: :type scope
"* bold*" => !{{scopes.BOLD}}

#+NAME: Bold: Invalid space before closing marker
#+BEGIN_FIXTURE
*bold *
#+END_FIXTURE
#+EXPECTED: :type scope
"*bold *" => !{{scopes.BOLD}}

* Italic

#+NAME: Italic: Showcase
#+BEGIN_FIXTURE
This is /italic/ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"/" => {{scopes.ITALIC_PUNCTUATION}}
"italic" => {{scopes.ITALIC}}
"/" => {{scopes.ITALIC_PUNCTUATION}}

#+NAME: Italic: Nested Bold
#+BEGIN_FIXTURE
This is /italic and *bold*/ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"/" => {{scopes.ITALIC_PUNCTUATION}}
"italic and " => {{scopes.ITALIC}}
"*" => {{scopes.ITALIC}}, {{scopes.BOLD_PUNCTUATION}}
"bold" => {{scopes.ITALIC}}, {{scopes.BOLD}}
"*" => {{scopes.ITALIC}}, {{scopes.BOLD_PUNCTUATION}}
"/" => {{scopes.ITALIC_PUNCTUATION}}

* Underline

#+NAME: Underline: Showcase
#+BEGIN_FIXTURE
This is _underline_ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"_" => {{scopes.UNDERLINE_PUNCTUATION}}
"underline" => {{scopes.UNDERLINE}}
"_" => {{scopes.UNDERLINE_PUNCTUATION}}

* Strikethrough

#+NAME: Strikethrough: Showcase
#+BEGIN_FIXTURE
This is +strikethrough+ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"+" => {{scopes.STRIKETHROUGH_PUNCTUATION}}
"strikethrough" => {{scopes.STRIKETHROUGH}}
"+" => {{scopes.STRIKETHROUGH_PUNCTUATION}}

* Code

#+NAME: Code: Showcase
#+BEGIN_FIXTURE
This is ~code~ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"~" => {{scopes.CODE_PUNCTUATION}}
"code" => {{scopes.CODE}}
"~" => {{scopes.CODE_PUNCTUATION}}

#+NAME: Code: No nesting
#+BEGIN_FIXTURE
This is ~*not bold*~ text.
#+END_FIXTURE
#+EXPECTED: :type scope
"~" => {{scopes.CODE_PUNCTUATION}}
"*not bold*" => {{scopes.CODE}}
"~" => {{scopes.CODE_PUNCTUATION}}

* Verbatim

#+NAME: Verbatim: Showcase
#+BEGIN_FIXTURE
This is =verbatim= text.
#+END_FIXTURE
#+EXPECTED: :type scope
"=" => {{scopes.VERBATIM_PUNCTUATION}}
"verbatim" => {{scopes.VERBATIM}}
"=" => {{scopes.VERBATIM_PUNCTUATION}}

* Colorize fixtures: F18 - Inline Markup (contexts)

#+NAME: F18: Inline Markup - Contexts
#+BEGIN_FIXTURE
/italic/ *bold* _underline_ +strikethrough+ =code= ~verbatim~
sub^script sub_script

* Inline markup in headline
** Headline with /italic/ and *bold*

* Inline markup in list
- /italic/ item
- *bold* item
- _underline_ item
- +strikethrough+ item
- =code= item
- ~verbatim~ item

* Inline markup in table
| Type         | Example           |
|--------------+------------------|
| Italic       | /italic/         |
| Bold         | *bold*           |
| Underline    | _underline_      |
| Strike       | +strike+         |
| Code         | =code=           |
| Verbatim     | ~verbatim~       |

* Inline markup in property drawer
:PROPERTIES:
:Note: /italic/ *bold* _underline_ +strike+ =code= ~verbatim~
:END:

* Inline markup in comment
#+COMMENT: /italic/ *bold*

* Inline markup with link
[[https://orgmode.org][*bold link*]]

* Inline markup with footnote
See /italic/[fn:1] and *bold*[fn:2].
[fn:1] Italic footnote.
[fn:2] Bold footnote.

* Inline markup with LaTeX
$\LaTeX$ /italic/ *bold* \alpha^2_3

* Inline markup with tags
* Example :inline:
	/italic/ *bold*

* Inline markup with priority and todo
*** TODO [#A] Review /italic/ and *bold*

* Inline markup in drawer
:LOGBOOK:
:Note: /italic/ *bold*
:END:

* Inline markup in block
#+BEGIN_QUOTE
/italic/ *bold* _underline_ +strike+ =code= ~verbatim~
#+END_QUOTE

* Inline markup in plain text
This is /italic/, this is *bold*, this is _underline_, this is +strike+, this is =code=, this is ~verbatim~.

* Inline markup with emoji and multilingual
/你好/ *Привет* _안녕하세요_ +مرحبا+ =שלום= ~こんにちは~

* Edge cases
/not closed *bold _underline+
/italic/ *bold*_/nested/_
*bold*/italic/
*bold* * *not bold*
*bold* /italic/ *bold*

#+END_FIXTURE

* Colorize fixtures: F19 - Inline Markup Nesting

#+NAME: F19: Inline Markup - Nesting
#+BEGIN_FIXTURE
/italic *bold _underline~/ text*/
=code *bold= ~verbatim~/=
*bold /italic/ _underline_*
/italic/ *bold* _underline_ +strike+ =code= ~verbatim~

* Inline markup nesting in headline
** Headline with /italic *bold*/ and =code ~verbatim~/=

* Inline markup nesting in list
- /italic *bold*/ item
- =code *bold= ~verbatim~/= item

* Inline markup nesting in table
| Type   | Example                |
|--------+------------------------|
| Mix    | /italic *bold*/        |
| Mix2   | =code *bold= ~verb~/=  |

* Inline markup nesting with link
[[https://orgmode.org][*bold /italic/ link*]]

* Inline markup nesting with footnote
See /italic *bold*/[fn:1].
[fn:1] Nested markup footnote.

* Inline markup nesting with LaTeX
$\LaTeX$ /italic *bold*/ \alpha^2_3

* Inline markup nesting with tags
* Example :inline:
	/italic *bold*/

* Inline markup nesting with priority and todo
*** TODO [#A] Review /italic *bold*/

* Inline markup nesting in drawer
:LOGBOOK:
:Note: /italic *bold*/
:END:

* Inline markup nesting in block
#+BEGIN_QUOTE
/italic *bold*/ =code *bold= ~verbatim~/=
#+END_QUOTE

* Inline markup nesting in plain text
This is /italic *bold*/ and =code *bold= ~verbatim~/=.

* Edge cases
/not closed *bold _underline+
/italic *bold*/_/nested/_
*bold*/italic/
*bold* * *not bold*
*bold* /italic/ *bold*

#+END_FIXTURE

* Added Edge Cases

#+NAME: Markup followed by punctuation
#+BEGIN_FIXTURE
This is *bold*, and this is /italic/.
#+END_FIXTURE
#+EXPECTED: :type scope
"bold" => {{scopes.BOLD}}
"," => !{{scopes.BOLD}}
"italic" => {{scopes.ITALIC}}
"." => !{{scopes.ITALIC}}

#+NAME: Negative test for URL-like text
#+BEGIN_FIXTURE
A link: http://example.com/
#+END_FIXTURE
#+EXPECTED: :type scope
"http://example.com/" => !{{scopes.ITALIC}}

#+NAME: Negative test for path-like text
#+BEGIN_FIXTURE
A path: /path/to/a/file
#+END_FIXTURE
#+EXPECTED: :type scope
"/path/to/a/file" => !{{scopes.ITALIC}}

#+NAME: Mismatched markup markers
#+BEGIN_FIXTURE
Mismatched: *bold/ and /italic*
#+END_FIXTURE
#+EXPECTED: :type scope
"*bold/" => !{{scopes.BOLD}}, !{{scopes.ITALIC}}
"/italic*" => !{{scopes.BOLD}}, !{{scopes.ITALIC}}