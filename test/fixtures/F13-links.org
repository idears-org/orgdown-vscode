#+TITLE: Test Suite for Links
#+AUTHOR: Orgdown Team

#+NAME: Standard external link with description
#+BEGIN_FIXTURE
[[https://orgmode.org/][The Org Mode Website]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://orgmode.org/    |
| 4       | The Org Mode Website    |

#+NAME: External link without description
#+BEGIN_FIXTURE
[[https://orgmode.org/]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://orgmode.org/    |
| 4       | undefined               |

#+NAME: Internal link to a headline
#+BEGIN_FIXTURE
[[*Some Headline]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | *Some Headline          |
| 4       | undefined               |

#+NAME: File link with description
#+BEGIN_FIXTURE
[[file:~/docs/main.org][My Document]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | file:~/docs/main.org   |
| 4       | My Document             |

#+NAME: Link abbreviation definition
#+BEGIN_FIXTURE
#+LINK: gh https://github.com/%s
#+END_FIXTURE
#+EXPECTED: :type regex :name linkAbbreviationRegex
| Group # | Expected Value |
|---------+-------------------------|
| 3       | gh                      |
| 4       | https://github.com/%s   |

#+NAME: Link using an abbreviation
#+BEGIN_FIXTURE
[[gh:orgdown/orgdown-vscode]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | gh:orgdown/orgdown-vscode |
| 4       | undefined               |

#+NAME: Malformed link with extra brackets
#+BEGIN_FIXTURE
[[https://a.com][b]]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://a.com           |
| 4       | b                       |

#+NAME: Plain URL in text should not match bracketed link regex
#+BEGIN_FIXTURE
This is a URL https://google.com in text.
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
no-match
