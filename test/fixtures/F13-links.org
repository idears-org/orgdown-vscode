#+TITLE: Test Suite for Links
#+AUTHOR: Orgdown Team

#+NAME: Standard external link with description
#+BEGIN_FIXTURE
[[https://orgmode.org/][The Org Mode Website]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://orgmode.org/    |
| 4       | The Org Mode Website    |

#+NAME: External link without description
#+BEGIN_FIXTURE
[[https://orgmode.org/]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://orgmode.org/    |
| 4       | undefined               |

#+NAME: Internal link to a headline
#+BEGIN_FIXTURE
[[*Some Headline]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | *Some Headline          |
| 4       | undefined               |

#+NAME: File link with description
#+BEGIN_FIXTURE
[[file:~/docs/main.org][My Document]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | file:~/docs/main.org   |
| 4       | My Document             |

#+NAME: Link abbreviation definition
#+BEGIN_FIXTURE
#+LINK: gh https://github.com/%s
#+END_FIXTURE
#+EXPECTED: :type regex :name linkAbbreviationRegex
| Group # | Expected Value |
|---------+-------------------------|
| 3       | gh                      |
| 4       | https://github.com/%s   |

#+NAME: Link using an abbreviation
#+BEGIN_FIXTURE
[[gh:orgdown/orgdown-vscode]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | gh:orgdown/orgdown-vscode |
| 4       | undefined               |

#+NAME: Malformed link with extra brackets
#+BEGIN_FIXTURE
[[https://a.com][b]]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+-------------------------|
| 2       | https://a.com           |
| 4       | b                       |

#+NAME: Plain URL in text should not match bracketed link regex
#+BEGIN_FIXTURE
This is a URL https://google.com in text.
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
no-match

#+NAME: Plain URL is auto-linked
#+BEGIN_FIXTURE
Go to https://www.google.com for more info.
#+END_FIXTURE
#+EXPECTED: :type scope
"https://www.google.com" => markup.underline.link.plain.org

#+NAME: Angle bracket link
#+BEGIN_FIXTURE
See also: <https://orgmode.org>
#+END_FIXTURE
#+EXPECTED: :type scope
"<https://orgmode.org>" => markup.underline.link.angle.org

#+NAME: Internal link to a custom ID
#+BEGIN_FIXTURE
A link to a [[#my-custom-id]].
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+----------------|
| 2       | #my-custom-id  |

#+NAME: Image file link
#+BEGIN_FIXTURE
An image: [[file:images/logo.png]]
#+END_FIXTURE
#+EXPECTED: :type regex :name linkRegex
| Group # | Expected Value |
|---------+----------------|
| 2       | file:images/logo.png |