#+TITLE: Test Suite for Planning Lines

#+BEGIN_COMMENT :description Expected Scopes & Capture Groups:

* === Line Scopes ===
# The following scope is applied to the entire planning line.
- meta.line.planning.org

* === Capture Group Scopes ===
# The following scopes are applied to the specific parts of the planning line.
1. keyword -> keyword.control.task-management.org
2. timestamp -> constant.other.timestamp.org
#+END_COMMENT

#+NAME: Simple SCHEDULED planning line
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-01 Fri>
#+END_FIXTURE

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-01 Fri> |

#+NAME: Simple DEADLINE planning line
#+BEGIN_FIXTURE
DEADLINE: <2025-08-05 Tue>
#+END_FIXTURE

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | DEADLINE       |
| 2       | <2025-08-05 Tue> |

#+NAME: Simple CLOSED planning line
#+BEGIN_FIXTURE
CLOSED: [2025-08-03 Sun 12:00]
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | CLOSED         |
| 2       | [2025-08-03 Sun 12:00] |

#+NAME: Planning line with repeater
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-07 Thu +1w>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-07 Thu +1w> |

#+NAME: Planning line with range
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-11 Mon>--<2025-08-13 Wed>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-11 Mon>--<2025-08-13 Wed> |

#+NAME: Planning line with inactive timestamp
#+BEGIN_FIXTURE
SCHEDULED: [2025-08-07 Thu]
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | [2025-08-07 Thu] |

#+NAME: Planning line with different case
#+BEGIN_FIXTURE
scheduled: <2025-08-19 Tue>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | scheduled      |
| 2       | <2025-08-19 Tue> |

#+NAME: Planning line with multiple spaces
#+BEGIN_FIXTURE
SCHEDULED:   <2025-08-18 Mon>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-18 Mon> |

#+NAME: Planning line with no space after colon
#+BEGIN_FIXTURE
SCHEDULED:<2025-08-17 Sun>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-17 Sun> |

#+NAME: Planning line with text after
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-15 Fri> some text
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
no-match

#+NAME: Planning line with text before
#+BEGIN_FIXTURE
some text SCHEDULED: <2025-08-16 Sat>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
no-match

#+NAME: Planning line with no timestamp
#+BEGIN_FIXTURE
SCHEDULED:
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
no-match

#+NAME: Planning line with invalid timestamp
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-14>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
| Group # | Expected Value |
|---------+----------------|
| 1       | SCHEDULED      |
| 2       | <2025-08-14>   |

#+NAME: Planning line with multiple timestamps
#+BEGIN_FIXTURE
SCHEDULED: <2025-08-24 Sun> <2025-08-25 Mon>
#+END_FIXTURE>

#+EXPECTED: planningLineRegex
no-match
