#+TITLE: Comments - Canonicalized Tests

#+NAME: Line comment
#+BEGIN_FIXTURE
# This is a line comment and should not be exported
#+END_FIXTURE

#+EXPECTED: :type scope
"# This is a line comment and should not be exported" => {{scopes.COMMENT_LINE}}

#+NAME: Comment block (BEGIN_COMMENT)
#+BEGIN_FIXTURE
#+BEGIN_COMMENT
This block should be ignored by export and colorization.
It can contain headlines, lists, tables, etc.
** COMMENT Nested headline in block
- List item in comment block
| Table | In | Comment |
#+END_COMMENT
#+END_FIXTURE

#+EXPECTED: :type scope
"#+BEGIN_COMMENT" => {{scopes.META_BEGIN_END_BLOCK}}, {{scopes.BLOCK_STANDARD_META}}
"This block should be ignored by export and colorization." => {{scopes.COMMENT_BLOCK_CONTENT}}
"** COMMENT Nested headline in block" => {{scopes.COMMENT_BLOCK_CONTENT}}
"- List item in comment block" => {{scopes.COMMENT_BLOCK_CONTENT}}
"| Table | In | Comment |" => {{scopes.COMMENT_BLOCK_CONTENT}}
"#+END_COMMENT" => {{scopes.META_BEGIN_END_BLOCK}}, {{scopes.BLOCK_STANDARD_META}}

#+NAME: Commented subtree headline
#+BEGIN_FIXTURE
** COMMENT This subtree is commented
Some content in a commented subtree.
#+END_FIXTURE

#+EXPECTED: :type scope
"** COMMENT This subtree is commented" => {{scopes.HEADING_BLOCK}}
"Some content in a commented subtree." => {{scopes.META_SECTION}}

#+NAME: Non-commented 'COMMENTED' headline (should not be treated as comment)
#+BEGIN_FIXTURE
* Headline with COMMENTED (should not be treated as comment)
** COMMENTED This is not a valid comment subtree
Some content that should not be ignored.
#+END_FIXTURE

#+EXPECTED: :type scope
"** COMMENTED This is not a valid comment subtree" => {{scopes.HEADING_BLOCK}}
"Some content that should not be ignored." => {{scopes.META_SECTION}}

#+NAME: Comment in a list
#+BEGIN_FIXTURE
* List with comment
- Item 1
  # This is a comment in a list
- Item 2
#+END_FIXTURE

#+EXPECTED: :type scope
"  # This is a comment in a list" => {{scopes.COMMENT_LINE}}

#+NAME: Comment in a table
#+BEGIN_FIXTURE
| Col1 | Col2 |
|------|------|
# This is a comment in a table
|  A   |  B   |
#+END_FIXTURE

#+EXPECTED: :type scope
"# This is a comment in a table" => {{scopes.COMMENT_LINE}}


#+NAME: Not a comment (no space after #)
#+BEGIN_FIXTURE
#not-a-comment
#+END_FIXTURE
#+EXPECTED: :type scope
"#not-a-comment" => !{{scopes.COMMENT_LINE}}

#+NAME: Case-insensitive comment block
#+BEGIN_FIXTURE
#+begin_comment
This should also be a comment.
#+end_comment
#+END_FIXTURE
#+EXPECTED: :type scope
"#+begin_comment" => {{scopes.META_BEGIN_END_BLOCK}}
"This should also be a comment." => {{scopes.COMMENT_BLOCK_CONTENT}}
"#+end_comment" => {{scopes.META_BEGIN_END_BLOCK}}

#+NAME: Inline markup inside a line comment
#+BEGIN_FIXTURE
# This is a *bold* comment.
#+END_FIXTURE
#+EXPECTED: :type scope
"# This is a *bold* comment." => {{scopes.COMMENT_LINE}}
"*bold*" => {{scopes.META_INLINE_BOLD}}
"bold" => {{scopes.BOLD}}

#+NAME: Empty comment block
#+BEGIN_FIXTURE
#+BEGIN_COMMENT
#+END_COMMENT
#+END_FIXTURE
#+EXPECTED: :type scope
"#+BEGIN_COMMENT" => {{scopes.META_BEGIN_END_BLOCK}}
"#+END_COMMENT" => {{scopes.META_BEGIN_END_BLOCK}}